{% if collection != blank %}
  {% assign selected_collection = collection %}
{% else %}
  {% assign selected_collection = collections[section.settings.collection_handle] %}
{% endif %}

<!-- Hero Section -->
<div style="background-color: #F5F1E8; min-height: 70vh; display: flex; align-items: center;">
    <div style="max-width: 1280px; margin: 0 auto; padding: 4rem 2rem; width: 100%;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center;">
            
            <!-- Left Side - Large Letter -->
            <div style="display: flex; align-items: center; justify-content: center;">
                {% assign first_letter = selected_collection.title | slice: 0 %}
                <span style="font-size: 20rem; font-family: Georgia, serif; color: #E8DCC8; line-height: 0.8; font-weight: 400;">
                    {{ first_letter }}
                </span>
            </div>
            
            <!-- Right Side - Collection Info -->
            <div style="padding: 2rem 0;">
                {% if section.settings.subtitle != blank %}
                    <p style="font-size: 0.75rem; font-weight: 600; letter-spacing: 0.15em; color: #D4A574; margin-bottom: 1.5rem;">
                        {{ section.settings.subtitle | upcase }}
                    </p>
                {% endif %}
                
                <h1 style="font-family: Georgia, serif; font-size: 4rem; font-weight: 400; color: #2d2d2d; margin-bottom: 2rem; line-height: 1.1;">
                    {{ selected_collection.title }}
                </h1>
                
                {% if selected_collection.description != blank %}
                    <div style="font-size: 1rem; color: #8B7355; line-height: 1.8; margin-bottom: 2.5rem; max-width: 500px;">
                        {{ selected_collection.description }}
                    </div>
                {% endif %}

                <a href="#productos" style="display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; font-weight: 600; color: #2d2d2d; text-decoration: none; letter-spacing: 0.05em;">
                    VER COLECCIÓN
                    <svg style="width: 1rem; height: 1rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
            
        </div>
    </div>
</div>

<div style="background-color: white; padding: 4rem 0;" id="productos">
    <div style="max-width: 1280px; margin: 0 auto; padding: 0 2rem;">
        
        {% paginate selected_collection.products by section.settings.products_per_page %}
        
            <!-- Botón de retornar -->
            <div style="margin-bottom: 2rem;">
                <a href="{{ routes.collections_url }}" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #666; text-decoration: none; font-size: 0.9375rem; font-weight: 500;">
                    <svg style="width: 1.25rem; height: 1.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                    </svg>
                    Volver a Colecciones
                </a>
            </div>
        
            <div style="text-align: center; margin-bottom: 3rem;">
                <p style="font-size: 0.875rem; color: #999;">
                    {{ paginate.items }} productos
                </p>
            </div>

            <!-- Grid de productos -->
            {% if selected_collection.products.size > 0 %}
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;">
                    {% for product in selected_collection.products %}
                        {% render 'product-card', product_product: product %}
                    {% endfor %}
                </div>

                <!-- Paginación -->
                {% if paginate.pages > 1 %}
                    <div style="margin-top: 3rem;">
                        {% render 'pagination', pagination: paginate %}
                    </div>
                {% endif %}
            {% else %}
                <!-- Estado vacío -->
                <div style="text-align: center; padding: 4rem 0;">
                    <svg style="width: 6rem; height: 6rem; margin: 0 auto 1.5rem; color: #ddd;" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                    </svg>
                    <h2 style="font-size: 1.5rem; font-weight: 600; color: #2d2d2d; margin-bottom: 0.5rem;">
                        No hay productos en esta colección
                    </h2>
                    <p style="color: #888; margin-bottom: 2rem;">
                        Esta colección está vacía actualmente
                    </p>
                    <a href="{{ routes.all_products_url }}" style="display: inline-block; padding: 0.75rem 1.5rem; background-color: #2d2d2d; color: white; font-weight: 600; text-decoration: none; transition: background-color 0.2s;">
                        Ver todos los productos
                    </a>
                </div>
            {% endif %}

        {% endpaginate %}

    </div>
</div>

{% schema %}
{
    "name": "Template Collection",
    "settings": [
        {
            "type": "collection",
            "id": "collection_handle",
            "label": "Colección",
            "info": "Selecciona la colección a mostrar (Aretes, Collares, Pulseras, etc.)"
        },
        {
            "type": "text",
            "id": "subtitle",
            "label": "Subtítulo",
            "default": "LA LUZ QUE ELIGES LLEVAR"
        },
        {
            "type": "range",
            "id": "products_per_page",
            "min": 6,
            "max": 48,
            "step": 3,
            "label": "Productos por página",
            "default": 12
        }
    ]
}
{% endschema %}