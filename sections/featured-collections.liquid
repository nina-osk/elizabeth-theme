<div class="w-full bg-white py-12 md:py-16 lg:py-20">
  <div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8">
    
    <!-- Header -->
    <div style="text-align: center; margin-bottom: 3rem;">
      <p style="font-size: 0.6875rem; font-weight: 600; letter-spacing: 0.15em; color: #D4A574; margin-bottom: 1rem;">
        {{ section.settings.header_small | default: "DESCUBRE" }}
      </p>
      <h2 style="font-family: Georgia, serif; font-size: 2.5rem; font-weight: 400; color: #2d2d2d;">
        {{ section.settings.title | default: "Nuestras Colecciones" }}
      </h2>
    </div>

    <!-- Collection Cards -->
    {% if section.blocks.size > 0 %}
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; max-width: 1280px; margin: 0 auto;">
        {% for block in section.blocks %}
          {% assign collection_item = collections[block.settings.collection] %}
          {% if collection_item %}
            <div style="position: relative; height: 500px; overflow: hidden; border-radius: 8px;" {{ block.shopify_attributes }}>
              <!-- Background Image -->
              {% if collection_item.image %}
                <img src="{{ collection_item.image | image_url: width: 800 }}" 
                     alt="{{ collection_item.title }}" 
                     style="position: absolute; width: 100%; height: 100%; object-fit: cover;">
              {% elsif collection_item.products.first.featured_image %}
                <img src="{{ collection_item.products.first.featured_image | image_url: width: 800 }}" 
                     alt="{{ collection_item.title }}" 
                     style="position: absolute; width: 100%; height: 100%; object-fit: cover;">
              {% else %}
                <div style="position: absolute; width: 100%; height: 100%; background-color: #333;"></div>
              {% endif %}
              
              <!-- Dark Overlay -->
              <div style="position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.6));"></div>
              
              <!-- Content -->
              <div style="position: relative; height: 100%; display: flex; flex-direction: column; justify-content: flex-end; padding: 2rem; color: white;">
                <p style="font-size: 0.6875rem; font-weight: 600; letter-spacing: 0.15em; color: #D4A574; margin-bottom: 1rem;">
                  {{ block.settings.subtitle | default: "LA LUZ QUE ELIGES LLEVAR" | upcase }}
                </p>
                <h3 style="font-family: Georgia, serif; font-size: 2.5rem; font-weight: 400; color: white; margin-bottom: 1rem; line-height: 1.2;">
                  {{ collection_item.title }}
                </h3>
                <p style="font-size: 0.9375rem; color: rgba(255,255,255,0.9); margin-bottom: 1.5rem; line-height: 1.6;">
                  {{ block.settings.description | default: collection_item.description | strip_html | truncate: 100 }}
                </p>
                <a href="{{ collection_item.url }}" 
                   style="display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.8125rem; font-weight: 600; letter-spacing: 0.05em; color: #D4A574; text-decoration: none; transition: transform 0.3s;">
                  VER COLECCIÓN
                  <svg style="width: 1rem; height: 1rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                  </svg>
                </a>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

  </div>
</div>

<script>
// Hover effects for collection cards
document.addEventListener('DOMContentLoaded', function() {
  const cards = document.querySelectorAll('[style*="position: relative; height: 500px"]');
  
  cards.forEach(card => {
    const link = card.querySelector('a[style*="display: inline-flex"]');
    
    card.addEventListener('mouseenter', function() {
      if (link) {
        link.style.transform = 'translateX(5px)';
      }
    });
    
    card.addEventListener('mouseleave', function() {
      if (link) {
        link.style.transform = 'translateX(0)';
      }
    });
  });
});
</script>


{% schema %}
{
  "name": "Colección Filtrable",
  "settings": [
    {
      "type": "text",
      "id": "header_small",
      "label": "Encabezado Pequeño",
      "default": "DESCUBRE"
    },
    {
      "type": "text",
      "id": "title",
      "default": "Nuestras Colecciones",
      "label": "Título"
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Colección",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Seleccionar colección"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtítulo",
          "default": "LA LUZ QUE ELIGES LLEVAR"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Descripción personalizada",
          "info": "Opcional - deja vacío para usar la descripción de la colección"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Colección Filtrable",
      "blocks": [
        {
          "type": "collection"
        },
        {
          "type": "collection"
        },
        {
          "type": "collection"
        }
      ]
    }
  ]
}
{% endschema %}