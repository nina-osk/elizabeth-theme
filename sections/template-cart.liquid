{% if cart.item_count > 0 %}
  <div class="max-w-6xl flex flex-col my-10 mx-auto">
    <div class="flex items-end justify-between my-5">
      <h1 class="text-3xl">Tu Carrito</h1>
      <a href="{{ routes.all_products_collection_url }}" class="text-blue-600 hover:text-blue-800 font-medium underline"> Continúa comprando</a>
       <div class="text-3xl">
        </div>
     </div>
    </div>
      <div class="max-w-6xl flex flex-col my-10 mx-auto">
      <form action="{{ routes.cart_url }}" method="POST" novalidate> 
        <table class="table-auto divide-y divide-gray-200 my-4 w-full">
          <thead>
           <th class="px-6 py-3 text-left text-sm font-medium text-gray-500">Producto</th>
          <th class="px-6 py-3 text-left text-sm font-medium text-gray-500">Cantidad</th>
          <th class="px-6 py-3 text-left text-sm font-medium text-gray-500">Precio</th>
           <th>total</th>
         </thead>
          <tbody>
            {% for item in cart.items %}
             <tr class="table row">
             <td class="px-4 py-2 flex flex-col justify-center">             
              <a href="{{ item.url }}"> 
                {% if item.image %}
                  <img src="{{ item.image | image_url: 'small' }}" alt="{{ item.title | escape }}" width="80" height="80" class="w-20 h-20 object-cover border">
                {% else %}
                  {{ 'product-1' | placeholder_svg_tag: 'w-20 h-20 object-cover border' }}"
                {% endif %}
              </a>
            </td>
            <td class="py-4 px-2 flex flex-col justify-center">
              <a href="{{ item.url }}" class="my-1">{{ item.product.title | truncatewords:5 }}</a>
              <span class="text-sm text-gray-500 my-1">{{ item.variant.title }}</span>
              <a href="{{ routes.cart_change_url }}?line={{ forloop.index }}&amp;quantity=0" class="text-sm font-medium text-red-500 my-1">Eliminar</a>
              </td>
              <td class="py-4 px-2">
              <input type="number" name="updates[]" id="updates_{{ forloop.index }}" value="{{ item.quantity }}" min="1" class="w-20 border p-2">
               </td>
               <td  class="py-4 px-2">
                {{ item.line_price | money }}
               </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="flex flex-col md:flex-row items-center justify-between">
        <div class="w-full my-4">
            <div class="flex flex-col items-start">
                <label for="cart-note" class="my-1">Notas del pedido</label>
                <textarea id="cart-note" name="note" rows="4" class="w-full md:max-w-lg resize-none h-20" placeholder="Instrucciones especiales para el pedido">{{ cart.note }}</textarea>
        </div>
        </div>
         <div class="w-full my-4 md:w-80">
            <h3 class="text-lg font-medium mb-4">Resumen del pedido:{{ cart.total_price | money }}</h3>
                <div class="my-2">
                <button type= "submit" name="update" class="w-full p-3 border border-gray-600 text-gray-600 font-medium hover:bg-gray-600 hover:text-white" >
                    Aplicar código de descuento
                </button>
                 </div>
                <div class="my-2">
                <button type= "submit" name="checkout" class="w-full p-3 border border-gray-600 text-gray-600 font-medium hover:bg-gray-600 hover:text-white" >
                    Proceder al pago
                </button>
                 </div>
         </div>
    </div>
    </form>
</div>
   
{% else %}
  <div class="max-w-6xl h-60 my-4 flex items-center justify-center">
    <div class="text-center">
        <h1 class="text-3xl my-4">Tu carrito esta vacío.</h1>
        <div class="my-4 py-4">
            <a href="{{ routes.all_products_collection_url }}" class="border border-gray-600 text-white bg-gray-800 px-8 py-3">Continúa comprando</a>
        </div>
  </div>
   </div>
{% endif %}